
### 8.4.3. 멀티-클러스터 모니터링 
 
```
이 섹션은 Neo4j 멀티-클러스터의 특정 모니터링 기능에 대해 설명합니다. 
```
 
멀티-클러스터 관련 정보를 제공하는 프로시저를 이용할 수 있습니다. 이 섹션에서는 다음 내용을 다룹니다. 


- 멀티-클러스터 내 인스턴스 개요 얻기
- 멀티-클러스터 내 모든 데이터베이스의 라우팅 정보 얻기
- 멀티-클러스터 내 주어진 데이터 베이스의 라우팅 정보 얻기

아래 이미지는 다중 클러스터에 대한 정보를 찾는 데 사용하는 절차의 개요를 제공합니다.


**그림 8.1. 멀티-클러스터를 모니터링할 수 있는 절차**

![multicluster monitoring](https://neo4j.com/docs/operations-manual/3.4/images/multicluster-monitoring.svg)


#### 8.4.3.1. 멀티-클러스터 내 모든 인스턴스 개요 얻기 

The ```dbms.cluster.overview()``` 프로시저 관련 정보는 [섹션 8.4.1.2, 클러스터 내 인스턴스 개요 정보 얻기](/monitoring/causal-cluster/procedures.md)에서 확인할 수 있습니다. 이것은 쿼리를 운영할 때 필요한 클러스터 멤버 종류 및 구성원이 속한 구성 클러스터에
 관계없이 모든 멀티-클러스터 개요 정보를 제공합니다. 각 클러스터 멤버가 다루는 데이터베이스 이름은 "database"에서 확인할 수 있습니다. 


[단일 인과관계 클러스터 모니터링](/monitoring/causal-cluster/procedures.md)하는 것과 다르게 클러스터 개요 출력은 리더 역할과 멀티 멤버가 포함된 정보를 출력합니다.  

#### 8.4.3.2. 멀티-클러스터 내 모든 데이터베이스의 라우팅 정보 얻기 

멀티-클러스터 내 모든 데이터베이스의 라우팅-케이블 엔드포인트 절차를 찾을 때 사용합니다. 

**구문:**

```CALL dbms.cluster.routing.getRoutersForAllDatabases()```

**반환 값:**

json 지도는 다음 필드를 포함합니다:

| 이름        | 설명                                    |
| ----------- | --------------------------------------- |
| `ttl`       | 이 정보의 Time To Live (TTL)            |
| `routers`   | 이 설정에서 이용가능한 라우터 리스트.   |
| `addresses` | 라우팅에서 이용가능한 주소 리스트.      |
| `database`  | 이 정보가 적용가능한 데이터베이스 이름. |

**고려사항:**
 
이 정보는 사람을 위한 것이 아닌, 클라이언트 디렉토리 프로그램에서 소비되며 리턴된 주소의 전체 라우팅 요청 (bolt+routing 참조)을 발행합니다. 

**예 8.14. 다중-클러스터의 모든 데이터베이스 라우터 얻기**

데이터베이스 ```foo```, ```bar```, 및 ```baz```을 포함하는 다중-클러스터 라우팅-케이블 엔드포인트를 확인하려면 다음 쿼리를 멀티-클러스터의 코어서버에서 실행하면 됩니다. 

```
CALL dbms.cluster.routing.getRoutersForAllDatabases()
```

결과는 ```foo```, ```bar```, 및 ```baz``` 클러스터에서 라우팅을 지원하는 멤버의 주소 리스트와 이 정보의 TTL(time to live) 입니다. 

```
ttl: 300,
routers: [
  {
    addresses: [neo20:7687,neo21:7687,neo22:7687],
    database: "foo"
  }, {
    addresses: [neo23:7687,neo24:7687,neo25:7687],
    database: "bar"
  }, {
    addresses: [neo26:7687,neo27:7687,neo28:7687],
    database: "baz"
  }
]
```

#### 8.4.3.3. 다중-클러스터 내 모든 데이터베이스 라우팅 정보 얻기 

멀티-클러스터 내 주어진 데이터베이스의 라우팅-케이블 엔드포인트에서는 이 절차를 사용합니다. 

**문법:**

```
CALL dbms.cluster.routing.getRoutersForDatabase(database-name)
```

**반환 값:**

json 지도는 다음 필드를 포함합니다:

| 이름        | 설명                                    |
| ----------- | --------------------------------------- |
| `ttl`       | 이 정보의 Time To Live (TTL)            |
| `routers`   | 이 설정에서 이용가능한 라우터 리스트.   |
| `addresses` | 라우팅에서 이용가능한 주소 리스트.      |
| `database`  | 이 정보가 적용가능한 데이터베이스 이름. |

**고려 사항:**
 
이 정보는 사람을 위한 것이 아닌, 클라이언트 디렉토리 프로그램에서 소비되며 리턴된 주소의 전체 라우팅 요청 (bolt+routing 참조)을 발행할 수 있습니다. 

**예 8.15. 멀티-클러스터 내 주어진 데이터베이스의 라우터 얻기**

```foo``` 데이터베이스를 호스팅하는 클러스터에서 라우팅 가능한 엔드 포인트 (bolt + routing 참조)를 보려면 멀티 클러스터의 코어 서버에서 아래 쿼리를 실행하십시오.

```
CALL dbms.cluster.routing.getRoutersForDatabase("foo")
```

결과는 ```foo``` 클러스터 라우팅을 지원하는 구성원 주소 목록과 정보의 TTL (Time to Live)과 같습니다. 이 정보는 사람을 대상으로하는 것이 아닌 클라이언트 측 디렉토리 프로그램을 이용하므로  반환된 주소 중 하나에 전체 라우팅 요청을 발행합니다. 

```
ttl: 300,
routers: [
  {
    addresses: [neo20:7687,neo21:7687,neo22:7687],
    database: "foo"
  }
]
```
