
## 5.1. 업그레이드 계획 

```
이 섹션에서는 Neo4j를 업그레이드를 계획하는 방법에 대해 설명합니다.
```

이 섹션에서는 Neo4j 데이터를 저장할때 사용하는 디렉토리를 ```데이터베이스 디렉토리```라고 합니다. 데이터베이스 디렉토리의 기본 경로는 : <neo4j-home>/data/databases/graph.db 입니다.

[dbms.directories.data](https://neo4j.com/docs/operations-manual/3.4/reference/configuration-settings) 변수 또는 [dbms.active_database](https://neo4j.com/docs/operations-manual/3.4/reference/configuration-settings/#config_dbms.active_database) 설정에 사용자 정의 값이 있으면 데이터베이스 디렉터리 위치에 영향을 줍니다.

### 5.1.1. 지원되는 업그레이드 경로

지원하는 Neo4j 업그레이드 경로는 다음과 같습니다.

- 최신 2.3. → 3.4.6
- 최신 3.0. → 3.4.6
- 최신 3.1. → 3.4.6
- 최신 3.2. → 3.4.6
- 최신 3.3. → 3.4.6
- 모든 3.4. → 3.4.6

**한계**

Neo4j 업그레이드는 단독 운영체제에서만 사용해야 합니다. 단일-인스턴스 설치를 캐쥬얼 클러스터로 바꾸는 것과 같은 변경사항이 있을 때는 따로 작업해야 합니다. 

### 5.1.2. 업그레이드 준비

1. 지원되는 업그레이드 경로를 검토합니다.

새로운 메인/마이너 버전으로로 업그레이드하기 전에 데이터베이스를 가장 최신 버전으로 업그레이드해야 합니다. 다음 페이지에서 최신 버전을 확인할 수 있습니다. [http://neo4j.com/download/other-releases.](http://neo4j.com/download/other-releases)

2. [neo4j.com의 업그레이드 가이드](https://neo4j.com/guides/upgrade/)를 확인하세요.

업그레이드 가이드는 Neo4j 고객 지원에서 유지되며 업그레이드 작업과 관련 중요한 정보가 포함되어 있습니다.

3. 출시 정보를 확인합니다.

각 버전 별 변경 내용과 관련된 내용은 [릴리즈 노트](https://neo4j.com/release-notes/)에서 확인할 수 있습니다.  

4. 설정 변경을 적용합니다. 

a. 각 버전마다 새로운 구성이 설정되고 기존 구성이 변경 될 수 있습니다. 드문 경우이지만 설정에 따라 버전간 이름이 바뀔 수도 있습니다. 이런 변화가 계정에 적용되도록 확실히 해야합니다. 

b. 또한 현재 구성 파일을 검사하고 기본 설정 이외 내용을 기록할 때 유용합니다. 업그레이드 할 때 ```dbms.directories.data``` 및 ```dbms.active_database``` 설정의 사용자 정의 값을 기록하는 것이 특히 중요합니다. 클러스터 설치 시, 클러스터 특정 구성 설정에 주의하십시오. 이것은 클러스터 구성원마다 다를 수 있습니다.

5. 인덱스를 업그레이드합니다.

[섹션 9.2, “인덱스 환경설정”](../performance/index-configuration.md)를 검토하여 성능 향상을 위해 변경할 인덱스가 있는지 확인합니다. 테스트 업그레이드에서 이런 인덱스를 다시 작성하십시오.

6. 애플리케이션 코드를 업그레이드합니다.

업그레이드 계획의 일환으로 Neo4j를 사용하는 모든 애플리케이션을 테스트하고 업데이트 준비를 합니다. 애플리케이션 코드 업데이트 소요 시간은 애플리케이션에 따라 다릅니다. 

특히, Cypher 언어는 Neoj4 버전이 변할 때 업그레이드될 수도 있습니다. 이전 버전과 호환하기 위해 Neo4j는 이전 Cypher 언어 버전을 명시적으로 선택할 수 있는 지시문을 제공합니다. 이것은 [Neo4j 개발자 매뉴얼](https://neo4j.com/docs/developer-manual/3.4/cypher/deprecations-additions-removals-compatibility/#cypher-compatibility)에 적힌대로 전역이나 개별 문장으로 수행할 수 있습니다.

7. 사용자 플러그인을 업그레이드합니다.

플러그인 디렉토리([섹션 3.1" 파일 위치](../configuration/file-locations.md)참조)에서 사용자 지정 플러그인이 배포에 사용되는지 확인합니다. 모든 플러그인이 Neo4j 3.4.6과 호환되도록 합니다. 

8. 디스크 용량 요구사항을 계획합니다.

업그레이드는 데이터베이스 전체 복사본을 만들기 때문에 여유 디스크 공간이 필요합니다. 업그레이드를 위해서 추가 (50% * size_of(`데이터베이스 디렉터리`))를 사용할 수 있는지 확인하십시오. 또한 사전 업그레이드에 필요한 디스크 공간을 예약해야 합니다. 

업그레이드된 데이터베이스는 전체적으로 약간 더 큰 데이터 파일 생성을 필요로 합니다. 

9. 테스트 업그레이드를 수행합니다.

이 챕터 결과를 기반으로 업그레이드를 위한 테스트 환경을 할당하고 테스트 업그레이드를 수행합니다. 테스트 업그레이드는 플러그인 및 애플리케이션 코드 업그레이드와 같은 추가 작업뿐만 아니라 프로덕션 업그레이드에 필요한 시간 관련 정보를 제공합니다.
